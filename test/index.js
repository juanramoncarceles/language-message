(function(){const languagesData=[{urlCode:"es",browserCode:"es",sentence:"Esta página está disponible en Español",button:"Ver en Español",remember:"No volver a mostrar"},{urlCode:"fr",browserCode:"fr",sentence:"Cette page est disponible en français",button:"Voir en Français",remember:"Ne montre plus"},{urlCode:"it",browserCode:"it",sentence:"Questa web è disponibile in Italiano",button:"Vedere in Italiano",remember:"Non mostrare di nuovo"},{urlCode:"zh-hans",browserCode:"zh",sentence:"此页面有中文版本",button:"用中文查看",remember:"不再显示"},{urlCode:"",browserCode:"en",sentence:"This page is available in English",button:"View in English",remember:"Don't show again"}];const themeData={referenceElements:[".wpml-ls-current-language",".ast-mobile-menu-buttons"],buttonStyle:"ast-button"};const globalTipArrowSize=8;const tooltipDefaultTop=10;const tooltipDefaultRight=10;const cookieExpirationDays=30;let langTipContainer;let referenceElementIndex;let referenceElement;function getUrlLangIndex(){const websitePath=window.location.pathname;const langIndex=languagesData.findIndex(lang=>{const langRegExp=new RegExp("^/"+lang.urlCode+"/");return langRegExp.test(websitePath)});if(langIndex===-1)return languagesData.findIndex(lang=>lang.urlCode==="");else return langIndex}function getBrowserLangIndex(){const browserLang=navigator.language||navigator.userLanguage;return languagesData.findIndex(lang=>{const langRegExp=new RegExp("^"+lang.browserCode);return langRegExp.test(browserLang)})}function setContainerAbsolutePosition(el){if(el!==null){const refElementBoundingRect=el.getBoundingClientRect();langTipContainer.style.setProperty("--right-distance",refElementBoundingRect.width/2+"px");langTipContainer.style.top=refElementBoundingRect.bottom+globalTipArrowSize+window.scrollY+"px";langTipContainer.style.right=window.innerWidth-refElementBoundingRect.right+"px"}else{langTipContainer.style.top=tooltipDefaultTop+"px";langTipContainer.style.right=tooltipDefaultRight+"px"}}let observer;if(window.ResizeObserver){observer=new ResizeObserver(updatePosition)}else{console.warn("Your browser does not support ResizeObserver.")}function updatePosition(){let refEl;let refElIndex;for(let i=0;i<themeData.referenceElements.length;i++){refEl=document.querySelector(themeData.referenceElements[i]);if(refEl&&elementTakesUpSpace(refEl)){refElIndex=i;break}}if(referenceElementIndex!==refElIndex){if(referenceElementIndex!==undefined){if(observer)observer.unobserve(referenceElement)}if(refEl){referenceElementIndex=refElIndex;if(observer)observer.observe(refEl);referenceElement=refEl;langTipContainer.style.setProperty("--tip-arrow-size",globalTipArrowSize+"px")}else{referenceElementIndex=undefined;langTipContainer.style.setProperty("--tip-arrow-size",0)}}setContainerAbsolutePosition(refEl)}function elementTakesUpSpace(el){return!!(el.offsetWidth||el.offsetHeight||el.getClientRects().length)}function createLanguageTooltip(langCodeObj,url){const container=document.createElement("div");container.classList.add("language-tip");const closeBtn=document.createElement("div");closeBtn.classList.add("close-btn");closeBtn.innerHTML='<svg viewBox="0 0 15 15" width="15" height="15" stroke="#585858" stroke-width="2"><line x1="0" y1="0" x2="15" y2="15" /><line x1="0" y1="15" x2="15" y2="0" /></svg>';closeBtn.onclick=()=>{if(container.querySelector("input").checked){setCookie("dontAskLang","true",cookieExpirationDays)}removeTooltip()};container.appendChild(closeBtn);const sentence=document.createElement("span");sentence.textContent=langCodeObj.sentence;container.appendChild(sentence);const changeLangBtn=document.createElement("a");changeLangBtn.href=url;changeLangBtn.textContent=langCodeObj.button;changeLangBtn.style.margin="10px 0";if(themeData.buttonStyle)changeLangBtn.classList.add(themeData.buttonStyle);changeLangBtn.onclick=()=>{if(container.querySelector("input").checked){setCookie("dontAskLang","true",cookieExpirationDays);setCookie("preferredLang",langCodeObj.browserCode,cookieExpirationDays)}removeTooltip()};container.appendChild(changeLangBtn);const dontShowAgain=document.createElement("div");dontShowAgain.classList.add("dont-show-again");dontShowAgain.innerHTML=`<input type="checkbox" style="margin: 0 5px 0 0;"><span>${langCodeObj.remember}</span>`;container.appendChild(dontShowAgain);container.style.willChange="top, right";return container}function removeTooltip(){window.removeEventListener("scroll",updatePosition);window.removeEventListener("resize",updatePosition);if(observer)observer.disconnect();observer=null;langTipContainer.remove()}function setCookie(cname,cvalue,exdays){let expires;if(exdays){const d=new Date;d.setTime(d.getTime()+exdays*24*60*60*1e3);expires=`expires=${d.toUTCString()};`}document.cookie=`${cname}=${cvalue};${expires?expires:""}samesite=lax;path=/`}function getCookie(cname){keyValue=document.cookie.split("; ").find(row=>row.startsWith(cname));return keyValue?keyValue.split("=")[1]:""}function deleteCookie(cname){document.cookie=`${cname}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`}function createNewUrl(currentUrlLangObjIndex,newLangCodeObjIndex){const currentUrlLangCode=languagesData[currentUrlLangObjIndex].urlCode;const newUrlLangCode=languagesData[newLangCodeObjIndex].urlCode;let urlPathname;if(currentUrlLangCode!==""){const pathRegExp=new RegExp("^/"+currentUrlLangCode+"(/.+)");const urlPathnameRes=window.location.pathname.match(pathRegExp);urlPathname=urlPathnameRes!==null?urlPathnameRes[1]:"/"}else{urlPathname=window.location.pathname}return window.location.origin+(newUrlLangCode!==""?"/"+newUrlLangCode:"")+urlPathname}function main(){const preferredLang=getCookie("preferredLang");const dontAsk=getCookie("dontAskLang")==="true"?true:false;const urlLangIndex=getUrlLangIndex();const browserLangIndex=getBrowserLangIndex();const preferredLangIndex=languagesData.findIndex(lData=>preferredLang===lData.browserCode);if(preferredLang&&preferredLangIndex!==-1){if(preferredLangIndex!==urlLangIndex){const newUrl=createNewUrl(urlLangIndex,preferredLangIndex);window.location.replace(newUrl)}}else if(!dontAsk&&browserLangIndex!==-1&&browserLangIndex!==urlLangIndex){const newUrl=createNewUrl(urlLangIndex,browserLangIndex);langTipContainer=createLanguageTooltip(languagesData[browserLangIndex],newUrl);updatePosition();window.addEventListener("scroll",updatePosition);window.addEventListener("resize",updatePosition);langTipContainer.classList.add("hidden");document.body.appendChild(langTipContainer);window.setTimeout(()=>{langTipContainer.classList.remove("hidden")},2500)}else if(browserLangIndex===-1){console.warn("Sorry but we don't have our website in your browser's language.")}}window.addEventListener("load",main)})();